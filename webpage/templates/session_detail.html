{% extends "base.html" %}

{% block content %}
    <a href="{% url 'session-list' %}" class="btn btn-primary mx-3 mt-3">Back to Sessions</a>
    <div class="container mx-3">
    <div class="row">
    <div class="col-md-12 col-xl-6">
  <h1 class="mt-3">Session Details</h1>
  <div class="card mt-3">
    <div class="card-body">
      <h2>{{ session.session_name }}</h2>
      <p><strong>Your tutor:</strong> {{ session.tutor_id.username }}</p>
      <p><strong>Category:</strong> {{ session.category }}</p>
      <p><strong>Description:</strong> {{ session.session_description }}</p>
      <p><strong>Start Date:</strong> {{ session.start_date }}</p>
      <p><strong>End Date:</strong> {{ session.end_date }}</p>
      <p><strong>Location:</strong> {{ session.location }}</p>
      <p><strong>Participants:</strong> {{ session.participants.count }} / {{ session.maximum_participant }}</p>
    </div>
  </div>
    </div>
    <div class="col-md-12 col-xl-6">
  <h1 class="mt-3">Participants</h1>
    <div class="card mt-3">
    <div class="card-body">
      <ul>
        {% for participant in session.participants.all %}
          <li>{{ participant.username }}</li>
        {% empty %}
          <p>No participants yet.</p>
        {% endfor %}
      </ul>
    </div>
    </div>
    {% if request.user in session.participants.all %}
        <form method="post" action="{% url 'leave-session' session.pk %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-warning mt-3">Leave Session</button>
        </form>
      {% elif not session.is_full %}
        <form method="post" action="{% url 'join-session' session.pk %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-primary mt-3">Join Session</button>
        </form>
      {% elif not user.is_authenticated %}
        <h5>Login to join session</h5>
      {% else %}
        <p>The session is full.</p>
      {% endif %}
    </div>
</div>
    {% endblock %}
</div>